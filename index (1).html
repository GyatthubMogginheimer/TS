<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanien & Thailand: Totalanalys</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        /* --- CSS: CORPORATE MODERNISM --- */

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #333;
            margin: 0;
            padding: 40px;
        }

        h1 {
            text-align: center;
            font-weight: 800;
            margin-bottom: 20px;
            color: #1e293b;
            font-size: 2.8rem;
            letter-spacing: -1.5px;
        }

        .main-subtitle {
            text-align: center;
            color: #64748b;
            max-width: 800px;
            margin: 0 auto 80px auto;
            line-height: 1.6;
            font-size: 1.1rem;
        }

        /* --- Sektionsrubriker --- */
        .section-header {
            text-align: center;
            margin: 100px 0 50px 0;
            position: relative;
        }

        .section-header::after {
            content: "";
            display: block;
            width: 60px;
            height: 4px;
            background: #cbd5e1;
            margin: 15px auto 0 auto;
            border-radius: 2px;
        }

        .section-header h2 {
            font-size: 2rem;
            color: #0f172a;
            margin: 0;
            letter-spacing: -0.5px;
            font-weight: 700;
        }

        .section-desc {
            max-width: 700px;
            margin: 15px auto 0 auto;
            color: #64748b;
            line-height: 1.5;
        }

        /* --- CHART GRID & CONTAINER --- */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
            margin-bottom: 60px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .chart-container {
            background: #ffffff;
            padding: 25px;
            padding-bottom: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid rgba(0,0,0,0.04);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .chart-container:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            z-index: 10;
        }

        .canvas-wrapper {
            position: relative;
            height: 300px;
            width: 100%;
        }

        .chart-title {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-top: 10px;
            margin-bottom: 20px;
            color: #64748b;
            text-align: center;
            border-bottom: 1px solid #f1f5f9;
            padding-bottom: 10px;
        }

        /* --- POP-UP K츿LLA --- */
        .source-popup {
            position: absolute;
            top: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #e2e8f0;
            color: #334155;
            padding: 5px 14px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: none;
            white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 5;
        }

        .chart-container:hover .source-popup {
            opacity: 1;
            top: -15px;
        }

        /* --- TRIANGEL/DJUPANALYS SEKTION --- */
        .triangle-section {
            margin-top: 50px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .triangle-top-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            margin-bottom: 60px;
        }

        .triangle-bottom-row {
            display: flex;
            justify-content: center;
        }

        .triangle-bottom-row .chart-container { width: 60%; }
        .triangle-height { height: 350px; }

        /* --- SYNTES SEKTION --- */
        .synthesis-section {
            margin-top: 100px;
            background: #fff;
            padding: 60px 40px;
            border-radius: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
            border: 1px solid #f1f5f9;
        }

        .synthesis-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .synthesis-text h3 { font-size: 1.5rem; color: #1e293b; margin-bottom: 15px; }
        .synthesis-text p { color: #64748b; line-height: 1.7; font-size: 0.95rem; margin-bottom: 20px; }

        .highlight-box {
            background: #f8fafc;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            font-size: 0.9rem;
            color: #475569;
            margin-bottom: 15px;
        }

        /* --- REFERENCES / K츿LLF칐RTECKNING --- */
        .reference-section {
            max-width: 1000px;
            margin: 120px auto 40px auto;
            padding: 40px;
            background-color: #fff;
            border-top: 4px solid #cbd5e1;
            border-radius: 8px;
        }

        .reference-section h2 {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #1e293b;
            text-align: left;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .reference-list {
            list-style-type: none;
            padding: 0;
        }

        .reference-list li {
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #475569;
            padding-left: 20px;
            text-indent: -20px;
            line-height: 1.6;
        }

        .reference-list a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 500;
        }

        .reference-list a:hover { text-decoration: underline; }

        @media (max-width: 1100px) {
            .chart-grid { grid-template-columns: repeat(2, 1fr); }
            .triangle-bottom-row .chart-container { width: 90%; }
            .synthesis-layout { grid-template-columns: 1fr; }
        }
        @media (max-width: 700px) {
            .chart-grid, .triangle-top-row { grid-template-columns: 1fr; }
            body { padding: 20px; }
        }
    </style>
</head>
<body>

    <h1>Spanien & Thailand</h1>
    <div class="main-subtitle">Total datafusion: H칛lsa, Ekonomi, Sociala Faktorer & Demografi.</div>

    <div class="section-header">
        <h2>H칛lsa, Ekonomi & Samh칛lle</h2>
    </div>

    <div class="chart-grid">
        <div class="chart-container">
            <div class="source-popup">K칛lla: V칛rldsbanken</div>
            <div class="chart-title">Rent Vatten (%)</div>
            <div class="canvas-wrapper"><canvas id="chartWater"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: WHO / UNICEF</div>
            <div class="chart-title">Vaccination M칛ssling (%)</div>
            <div class="canvas-wrapper"><canvas id="chartVaccine"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: WHO</div>
            <div class="chart-title">Sjukv친rd (UHC Index)</div>
            <div class="canvas-wrapper"><canvas id="chartUHC"></canvas></div>
        </div>

        <div class="chart-container">
            <div class="source-popup">K칛lla: V칛rldsbanken</div>
            <div class="chart-title">BNP per Capita (PPP)</div>
            <div class="canvas-wrapper"><canvas id="chartGDP"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: V칛rldsbanken</div>
            <div class="chart-title">Gini (Inkomstoj칛mlikhet)</div>
            <div class="canvas-wrapper"><canvas id="chartGini"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: ILO</div>
            <div class="chart-title">Arbetsl칬shet (%)</div>
            <div class="canvas-wrapper"><canvas id="chartUnemployment"></canvas></div>
        </div>

        <div class="chart-container">
            <div class="source-popup">K칛lla: UNDP</div>
            <div class="chart-title">GII (J칛mst칛lldhet)</div>
            <div class="canvas-wrapper"><canvas id="chartGII"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: EIU</div>
            <div class="chart-title">Democracy Index</div>
            <div class="canvas-wrapper"><canvas id="chartDemocracy"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: Transparency Int.</div>
            <div class="chart-title">Korruption (CPI)</div>
            <div class="canvas-wrapper"><canvas id="chartCorruption"></canvas></div>
        </div>
    </div>

    <div class="section-header">
        <h2>Demografisk Utveckling</h2>
    </div>

    <div class="chart-grid">
        <div class="chart-container">
            <div class="source-popup">K칛lla: V칛rldsbanken</div>
            <div class="chart-title">F칬rv칛ntad Livsl칛ngd (칀r)</div>
            <div class="canvas-wrapper"><canvas id="chartLifeExp"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: UN Population</div>
            <div class="chart-title">Urbanisering (% i stad)</div>
            <div class="canvas-wrapper"><canvas id="chartUrban"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: V칛rldsbanken</div>
            <div class="chart-title">Befolkningstillv칛xt (%)</div>
            <div class="canvas-wrapper"><canvas id="chartPopGrowth"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: UN Population</div>
            <div class="chart-title">Nativitet (F칬dda per 1000)</div>
            <div class="canvas-wrapper"><canvas id="chartBirth"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: UN Population</div>
            <div class="chart-title">Mortalitet (D칬da per 1000)</div>
            <div class="canvas-wrapper"><canvas id="chartDeath"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: V칛rldsbanken</div>
            <div class="chart-title">Netto Migration</div>
            <div class="canvas-wrapper"><canvas id="chartMigration"></canvas></div>
        </div>
    </div>

    <div class="section-header">
        <h2>Djupanalys: Historisk Kontext</h2>
    </div>

    <div class="triangle-section">
        <p style="text-align: center; color: #64748b; margin-bottom: 40px; font-size: 0.9rem;">H친ll muspekaren 칬ver graferna nedan f칬r historiska orsaker.</p>

        <div class="triangle-top-row">
            <div class="chart-container">
                <div class="source-popup">K칛lla: V칛rldsbanken</div>
                <div class="chart-title">GNI per Capita (PPP)</div>
                <div class="canvas-wrapper triangle-height"><canvas id="triGNI"></canvas></div>
            </div>
            <div class="chart-container">
                <div class="source-popup">K칛lla: UNDP</div>
                <div class="chart-title">Human Development Index (HDI)</div>
                <div class="canvas-wrapper triangle-height"><canvas id="triHDI"></canvas></div>
            </div>
        </div>

        <div class="triangle-bottom-row">
            <div class="chart-container">
                <div class="source-popup">K칛lla: FAO</div>
                <div class="chart-title">Undern칛rd Befolkning (%)</div>
                <div class="canvas-wrapper triangle-height"><canvas id="triNutrition"></canvas></div>
            </div>
        </div>
    </div>

    <div class="section-header">
        <h2>Regionalt Perspektiv</h2>
        <div class="section-desc">H칛r j칛mf칬r vi l칛nderna med deras respektive regioner: Spanien vs EU och Thailand vs Sydostasien (SEA).</div>
    </div>

    <div class="chart-grid">
        <div class="chart-container">
            <div class="source-popup">K칛lla: V칛rldsbanken</div>
            <div class="chart-title">J칛mf칬relse: GNI PPP ($)</div>
            <div class="canvas-wrapper"><canvas id="regGNI"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: UNDP</div>
            <div class="chart-title">J칛mf칬relse: HDI</div>
            <div class="canvas-wrapper"><canvas id="regHDI"></canvas></div>
        </div>
        <div class="chart-container">
            <div class="source-popup">K칛lla: FAO</div>
            <div class="chart-title">J칛mf칬relse: Undern칛ring (%)</div>
            <div class="canvas-wrapper"><canvas id="regNutri"></canvas></div>
        </div>
    </div>

    <div class="synthesis-section">
        <div class="synthesis-layout">
            <div class="chart-container" style="border:none; box-shadow:none; padding:0;">
                <div class="source-popup">K칛lla: V칛rldsbanken</div>
                <div class="chart-title" style="font-size:1.2rem; border-bottom:none; margin-bottom:5px;">Syntes: 츿ldre Befolkning (65+)</div>
                <p style="text-align:center; font-size:0.85rem; color:#888; margin-bottom:20px;">
                    Visar 칬verg친ngen mot en 친ldrande befolkning. H친ll 칬ver punkterna f칬r orsaker & konsekvenser.
                </p>
                <div class="canvas-wrapper" style="height: 350px;">
                    <canvas id="chartAging"></canvas>
                </div>
            </div>

            <div class="synthesis-text">
                <h3>Demografisk Syntes</h3>
                <p>
                    Datat visar tydligt hur ekonomisk mognad och demografi h칛nger ihop. Spanien hanterar nu konsekvenserna av ett mycket l친ngt liv men f친 f칬dslar, medan Thailand f칬rs칬ker hantera samma problem men vid en l칛gre inkomstniv친.
                </p>
                <div class="highlight-box">
                    <strong>游쀯릖 Spanien:</strong> En "inverterad pyramid". H칬g livsl칛ngd och l친gt barnaf칬dande skapar press p친 v칛lf칛rden, vilket delvis balanseras av migration.
                </div>
                <div class="highlight-box" style="border-left-color: #3b82f6;">
                    <strong>游좷릖 Thailand:</strong> Unik i regionen. Har 친ldrats extremt snabbt p.g.a. framg친ngsrik familjeplanering. Riskerar att "bli gammal innan man blir rik".
                </div>
            </div>
        </div>
    </div>

    <div class="reference-section">
        <h2>K칛llf칬rteckning & Referenser</h2>
        <p style="margin-bottom:20px; color:#666; font-size:0.9rem;">F칬ljande k칛llor har anv칛nts f칬r sammanst칛llning av data i graferna ovan.</p>

        <ul class="reference-list">
            <li>
                Economist Intelligence Unit (EIU). (2024). <em>Democracy Index</em>. [Online]. Tillg칛nglig: <a href="https://www.eiu.com/n/campaigns/democracy-index-2023/" target="_blank">https://www.eiu.com/n/campaigns/democracy-index-2023/</a>
            </li>
            <li>
                Food and Agriculture Organization of the United Nations (FAO). (2024). <em>FAOSTAT: Suite of Food Security Indicators</em>. [Online]. Tillg칛nglig: <a href="https://www.fao.org/faostat/en/#data/FS" target="_blank">https://www.fao.org/faostat/en/#data/FS</a>
            </li>
            <li>
                International Labour Organization (ILO). (2024). <em>ILOSTAT: Unemployment rate</em>. [Online]. Tillg칛nglig: <a href="https://ilostat.ilo.org/" target="_blank">https://ilostat.ilo.org/</a>
            </li>
            <li>
                Transparency International. (2024). <em>Corruption Perceptions Index (CPI)</em>. [Online]. Tillg칛nglig: <a href="https://www.transparency.org/en/cpi/" target="_blank">https://www.transparency.org/en/cpi/</a>
            </li>
            <li>
                United Nations Development Programme (UNDP). (2024). <em>Human Development Reports (HDI & GII)</em>. [Online]. Tillg칛nglig: <a href="https://hdr.undp.org/data-center" target="_blank">https://hdr.undp.org/data-center</a>
            </li>
            <li>
                United Nations Population Division. (2024). <em>World Population Prospects 2024</em>. [Online]. Tillg칛nglig: <a href="https://population.un.org/wpp/" target="_blank">https://population.un.org/wpp/</a>
            </li>
            <li>
                V칛rldsbanken. (2024). <em>World Bank Open Data (Indicators: GDP, Gini, Life Expectancy, Migration)</em>. [Online]. Tillg칛nglig: <a href="https://data.worldbank.org/" target="_blank">https://data.worldbank.org/</a>
            </li>
            <li>
                World Health Organization (WHO). (2024). <em>Global Health Observatory (GHO) data repository</em>. [Online]. Tillg칛nglig: <a href="https://www.who.int/data/gho" target="_blank">https://www.who.int/data/gho</a>
            </li>
        </ul>
    </div>

    <script>
        // --- KONFIGURATION & DATA ---

        const years = [1985, 1995, 2005, 2015, 2022];
        const colorSpain = '#ef4444'; // R칬d
        const colorThai = '#3b82f6';  // Bl친
        const colorEU = '#7f1d1d';    // M칬rk R칬d
        const colorSEA = '#1e3a8a';   // M칬rk Bl친

        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748b';

        // Standardinst칛llningar
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            interaction: { mode: 'index', intersect: false },
            plugins: {
                legend: {
                    position: 'bottom',
                    align: 'center',
                    labels: { usePointStyle: true, font: { size: 12, weight: 600 }, padding: 20 }
                },
                tooltip: {
                    backgroundColor: 'rgba(15, 23, 42, 0.95)',
                    padding: 12,
                    titleFont: { size: 13, weight: 'bold' },
                    bodyFont: { size: 13 },
                    cornerRadius: 8,
                }
            },
            scales: {
                x: { grid: { display: false } },
                y: { grid: { color: '#f1f5f9' }, border: { display: false } }
            },
            elements: {
                line: { tension: 0.4, borderWidth: 3 },
                point: { radius: 3, hoverRadius: 6, borderWidth: 2 }
            }
        };

        // Funktion f칬r vanliga grafer
        function createChart(id, label, dataS, dataT) {
            const ctx = document.getElementById(id).getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        { label: 'Spanien', data: dataS, borderColor: colorSpain, backgroundColor: colorSpain, fill: false },
                        { label: 'Thailand', data: dataT, borderColor: colorThai, backgroundColor: colorThai, fill: false }
                    ]
                },
                options: commonOptions
            });
        }

        // --- SKAPA GRAFERNA ---
        createChart('chartWater', 'Vatten', [98, 99, 100, 100, 100], [70, 86, 96, 99, 99.8]);
        createChart('chartVaccine', 'Vaccin', [82, 90, 97, 96, 95], [52, 88, 96, 99, 86]);
        createChart('chartUHC', 'UHC Index', [null, null, 75, 81, 84], [null, null, 58, 76, 82]);
        createChart('chartGDP', 'BNP', [9800, 17500, 29000, 34900, 50400], [2100, 6500, 10300, 15800, 22400]);
        createChart('chartGini', 'Gini', [32.5, 34.3, 32.4, 34.6, 32.0], [43.1, 42.6, 39.3, 36.0, 34.9]);
        createChart('chartUnemployment', 'Arbetsl칬shet', [21.6, 22.7, 9.1, 22.0, 12.1], [2.5, 1.7, 1.3, 0.9, 1.1]);
        createChart('chartGII', 'GII', [null, 0.150, 0.103, 0.071, 0.048], [null, 0.440, 0.392, 0.380, 0.337]);
        createChart('chartDemocracy', 'Democracy', [null, null, 8.3, 8.3, 8.07], [null, null, 5.6, 5.09, 6.35]);
        createChart('chartCorruption', 'CPI', [null, 43, 68, 58, 60], [null, 30, 38, 38, 35]);

        createChart('chartLifeExp', 'Livsl칛ngd', [76.5, 78.2, 80.3, 82.8, 83.3], [68.1, 70.2, 72.3, 75.8, 79.7]);
        createChart('chartUrban', 'Urbanisering', [75, 76, 77, 79, 81], [28, 30, 38, 48, 53]);
        createChart('chartPopGrowth', 'Tillv칛xt', [0.4, 0.3, 1.6, -0.1, 0.3], [1.9, 1.1, 0.7, 0.4, 0.1]);
        createChart('chartBirth', 'Nativitet', [12.5, 9.2, 10.6, 9.0, 7.1], [24.0, 16.5, 12.0, 10.5, 9.0]);
        createChart('chartDeath', 'Mortalitet', [8.0, 8.8, 8.9, 9.1, 9.8], [6.5, 6.0, 6.5, 7.2, 7.8]);
        createChart('chartMigration', 'Migration', [-20000, 150000, 600000, -50000, 200000], [-50000, 10000, 50000, 20000, -10000]);

        // --- TRIANGEL GRAFER (CONTEXT) ---
        const contextData = {
            gni: {
                spain: ["Intr칛de i EG (nuvarande EU) 칬ppnar marknader.", "Infrastrukturboom och modernisering.", "Byggboom driven av l친ga r칛ntor och turism.", "Ekonomin 친terh칛mtar sig l친ngsamt efter finanskrisen.", "Stark tj칛nstesektor och 친terkomst av turism."],
                thai: ["Skifte fr친n jordbruk till l칛tt industri.", "Snabb exportdriven tillv칛xt ('Asian Tiger').", "칀terh칛mtning efter Asienkrisen 1997.", "Politisk instabilitet d칛mpar tillv칛xt.", "Fokus p친 h칬gteknologi och turism post-covid."]
            },
            hdi: {
                spain: ["Demokratisering st칛rker v칛lf칛rdssystemet.", "Massiv utbyggnad av utbildning och h칛lsa.", "En av v칛rldens h칬gsta f칬rv칛ntade livsl칛ngder.", "H칬g utbildningsniv친 men ekonomisk kris s칛nker snittet.", "Fortsatt mycket h칬g m칛nsklig utveckling."],
                thai: ["Fokus p친 grundl칛ggande sanitet och h칛lsa.", "V칛xande medelklass och b칛ttre skolg친ng.", "Inf칬rande av allm칛n sjukv친rd (30-baht scheme).", "Fortsatta f칬rb칛ttringar men regionala klyftor.", "칀ldrande befolkning b칬rjar belasta systemet."]
            },
            nutrition: {
                spain: ["Livsmedelsf칬rs칬rjning 칛r helt s칛krad.", "Ingen undern칛ring, fokus p친 matkvalitet.", "칐kande problem med 칬vervikt snarare 칛n hunger.", "Sociala skyddsn칛t f친ngar upp utsatta.", "Extremt l친ga niv친er (<2.5%)."],
                thai: ["Utbredd fattigdom p친 landsbygden.", "Ekonomisk tillv칛xt lyfter miljoner ur hunger.", "Thailand blir stor livsmedelsexport칬r.", "Modernt jordbruk eliminerar de flesta brister.", "Kvarvarande problem i isolerade bergsomr친den."]
            }
        };

        function createTriangleChart(id, dataS, dataT, key) {
            const ctx = document.getElementById(id).getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        { label: 'Spanien', data: dataS, borderColor: colorSpain, backgroundColor: colorSpain, pointRadius: 6, pointHoverRadius: 9, contextInfo: contextData[key].spain },
                        { label: 'Thailand', data: dataT, borderColor: colorThai, backgroundColor: colorThai, pointRadius: 6, pointHoverRadius: 9, contextInfo: contextData[key].thai }
                    ]
                },
                options: {
                    ...commonOptions,
                    plugins: {
                        legend: { position: 'bottom', labels: { usePointStyle: true, font: { size: 14, weight: 'bold' } } },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.98)',
                            padding: 16,
                            titleFont: { size: 16, weight: 800 },
                            bodyFont: { size: 14, lineHeight: 1.6 },
                            displayColors: true,
                            boxPadding: 8,
                            callbacks: {
                                afterBody: function(context) {
                                    let fullText = "\n--------------------------\n";
                                    context.forEach((item) => {
                                        const countryName = item.dataset.label;
                                        const text = item.dataset.contextInfo[item.dataIndex];
                                        const flag = countryName === 'Spanien' ? '游쀯릖' : '游좷릖';
                                        fullText += `${flag} ${countryName.toUpperCase()}:\n${text}\n\n`;
                                    });
                                    return fullText;
                                }
                            }
                        }
                    }
                }
            });
        }

        createTriangleChart('triGNI', [9600, 17200, 29100, 35200, 49600], [2050, 6400, 10200, 15500, 22100], 'gni');
        createTriangleChart('triHDI', [0.77, 0.83, 0.86, 0.89, 0.91], [0.57, 0.64, 0.70, 0.76, 0.80], 'hdi');
        createTriangleChart('triNutrition', [2.5, 2.5, 2.5, 2.5, 2.5], [35, 23, 12, 6.5, 5.8], 'nutrition');

        // --- REGIONALA GRAFER ---
        function createRegionalChart(id, dataS, dataEU, dataT, dataSEA) {
            const ctx = document.getElementById(id).getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        { label: 'Spanien', data: dataS, borderColor: colorSpain, backgroundColor: colorSpain, tension: 0.4 },
                        { label: 'EU Snitt', data: dataEU, borderColor: colorEU, backgroundColor: colorEU, borderDash: [5, 5], pointStyle: 'rectRot', tension: 0.4 },
                        { label: 'Thailand', data: dataT, borderColor: colorThai, backgroundColor: colorThai, tension: 0.4 },
                        { label: 'Sydostasien Snitt', data: dataSEA, borderColor: colorSEA, backgroundColor: colorSEA, borderDash: [5, 5], pointStyle: 'rectRot', tension: 0.4 }
                    ]
                },
                options: commonOptions
            });
        }

        // Estimerade regionala data
        createRegionalChart('regGNI',
            [9800, 17500, 29000, 34900, 50400],
            [10500, 19000, 31000, 38000, 53000],
            [2100, 6500, 10300, 15800, 22400],
            [1500, 4000, 7500, 12000, 17000]
        );

        createRegionalChart('regHDI',
            [0.77, 0.83, 0.86, 0.89, 0.91],
            [0.76, 0.82, 0.87, 0.90, 0.92],
            [0.57, 0.64, 0.70, 0.76, 0.80],
            [0.52, 0.59, 0.65, 0.71, 0.74]
        );

        createRegionalChart('regNutri',
            [2.5, 2.5, 2.5, 2.5, 2.5],
            [2.5, 2.5, 2.5, 2.5, 2.5],
            [35, 23, 12, 6.5, 5.8],
            [38, 28, 18, 10, 8.5]
        );


        // --- SYNTES GRAF (AGING) ---
        const synthesisData = {
            spain: [
                "ORSAK: Ung befolkning efter demokratisering.\nKONSEKVENS: Utbyggnad av skolor och v친rd beh칬vs.",
                "ORSAK: L친gkonjunktur d칛mpar barnaf칬dandet.\nKONSEKVENS: Arbetskraften b칬rjar stagnera.",
                "ORSAK: Immigration d칬ljer l친gt f칬delsetal.\nKONSEKVENS: Ekonomisk tillv칛xt men bostadsbrist.",
                "ORSAK: L친ngvarigt l친g fertilitet m칛rks nu.\nKONSEKVENS: Pensionssystemet under press.",
                "ORSAK: Extremt h칬g livsl칛ngd + f친 barn.\nKONSEKVENS: 'Silverekonomi' & v친rdbrist."
            ],
            thai: [
                "ORSAK: Jordbrukssamh칛lle med stora familjer.\nKONSEKVENS: H칬g f칬rs칬rjningsb칬rda (m친nga barn).",
                "ORSAK: 'Condom King' & familjeplanering.\nKONSEKVENS: F칛rre barn frig칬r resurser (demografisk utdelning).",
                "ORSAK: Industrialisering & urbanisering.\nKONSEKVENS: Traditionella n칛tverk f칬r 칛ldreomsorg bryts.",
                "ORSAK: Befolkningstillv칛xten n칛ra noll.\nKONSEKVENS: Brist p친 arbetskraft, behov av g칛starbetare.",
                "ORSAK: Snabbt 친ldrande innan full rikedom.\nKONSEKVENS: Risk f칬r att 'bli gammal innan man blir rik'."
            ]
        };

        const ctxAging = document.getElementById('chartAging').getContext('2d');
        new Chart(ctxAging, {
            type: 'line',
            data: {
                labels: years,
                datasets: [
                    {
                        label: 'Spanien',
                        data: [12.0, 15.1, 16.5, 18.5, 20.3],
                        borderColor: colorSpain, backgroundColor: colorSpain,
                        pointRadius: 6, pointHoverRadius: 10,
                        contextInfo: synthesisData.spain
                    },
                    {
                        label: 'Thailand',
                        data: [3.8, 5.2, 7.5, 10.7, 14.5],
                        borderColor: colorThai, backgroundColor: colorThai,
                        pointRadius: 6, pointHoverRadius: 10,
                        contextInfo: synthesisData.thai
                    }
                ]
            },
            options: {
                ...commonOptions,
                plugins: {
                    legend: { position: 'bottom', labels: { usePointStyle: true, font: { size: 14, weight: 'bold' } } },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.98)',
                        padding: 18,
                        titleFont: { size: 16, weight: 800 },
                        bodyFont: { size: 14, lineHeight: 1.5 },
                        displayColors: true,
                        boxPadding: 8,
                        callbacks: {
                            afterBody: function(context) {
                                let fullText = "\n--------------------------\n";
                                context.forEach((item) => {
                                    const countryName = item.dataset.label;
                                    const text = item.dataset.contextInfo[item.dataIndex];
                                    const flag = countryName === 'Spanien' ? '游쀯릖' : '游좷릖';
                                    fullText += `${flag} ${countryName.toUpperCase()}:\n${text}\n\n`;
                                });
                                return fullText;
                            }
                        }
                    }
                }
            }
        });

    </script>
</body>
</html>